(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),l=a(6),i=a(111),u=a(115),s=a(112),m=a(117);function d(e){var t=e.onIdSubmit,a=e.darkMode,c=Object(n.useRef)();var o={background:"".concat(a?'url("https://wallpapercave.com/wp/wp8092590.jpg")':'url("https://64.media.tumblr.com/53a35e7ed66f3159e01f3663af30706b/tumblr_ouztgbH0CG1vj8v9mo1_400.png")')},l={background:"".concat(a?"grey":"#d5e1df"),padding:"50px"},d={color:"".concat(a?"white":"black")},f={color:"".concat(a?"white":"black"),background:"".concat(a?"black":"white")};return r.a.createElement("div",{style:o},r.a.createElement(i.a,{className:"align-items-center d-flex",style:{height:"100vh"}},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),t(c.current.value)},className:"w-100",style:l},r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,{style:d},"Enter Your Id"),r.a.createElement(u.a.Control,{type:"text",ref:c,style:f,required:!0})),r.a.createElement(s.a,{type:"submit",className:"mr-2",variant:"".concat(a?"danger":"primary")},"Login"),r.a.createElement(s.a,{onClick:function(){t(Object(m.a)())},variant:"".concat(a?"dark":"secondary")},"Create A New Id"))))}function f(e,t){var a="whatsapp-clone-"+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),c=Object(l.a)(r,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(o))}),[a,o]),[o,i]}var v=a(118),p=a(116),b=a(114),E=a(119),g=a(19),y=a(16),k=r.a.createContext();function h(){return Object(n.useContext)(k)}function j(e){var t=e.children,a=f("contacts",[]),n=Object(l.a)(a,2),c=n[0],o=n[1];return r.a.createElement(k.Provider,{value:{contacts:c,createContact:function(e,t){o((function(a){return[].concat(Object(y.a)(a),[{id:e,name:t}])}))}}},t)}var x=a(63),C=a.n(x),O=r.a.createContext();function w(e){var t=e.id,a=e.children,c=Object(n.useState)(),o=Object(l.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){var e=C()("http://localhost:5000",{query:{id:t}});return u(e),function(){return e.close()}}),[t]),r.a.createElement(O.Provider,{value:i},a)}var M=r.a.createContext();function N(){return Object(n.useContext)(M)}function S(e){var t=e.id,a=e.children,c=f("conversations",[]),o=Object(l.a)(c,2),i=o[0],u=o[1],s=Object(n.useState)(0),m=Object(l.a)(s,2),d=m[0],v=m[1],p=h().contacts,b=Object(n.useContext)(O);var E=Object(n.useCallback)((function(e){var t=e.recipients,a=e.text,n=e.sender;u((function(e){var r=!1,c={sender:n,text:a},o=e.map((function(e){return a=e.recipients,n=t,a.length===n.length&&(a.sort(),n.sort(),a.every((function(e,t){return e===n[t]})))?(r=!0,Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(y.a)(e.messages),[c])})):e;var a,n}));return r?o:[].concat(Object(y.a)(e),[{recipients:t,messages:[c]}])}))}),[u]);Object(n.useEffect)((function(){if(null!=b)return b.on("receive-message",E),function(){return b.off("receive-message")}}),[b,E]);var k=i.map((function(e,a){var n=e.recipients.map((function(e){var t=p.find((function(t){return t.id===e})),a=t&&t.name||e;return{id:e,name:a}})),r=e.messages.map((function(e){var a=p.find((function(t){return t.id===e.sender})),n=a&&a.name||e.sender,r=t===e.sender;return Object(g.a)(Object(g.a)({},e),{},{senderName:n,fromMe:r})})),c=a===d;return Object(g.a)(Object(g.a)({},e),{},{messages:r,recipients:n,selected:c})})),j={conversations:k,selectedConversation:k[d],sendMessage:function(e,a){b.emit("send-message",{recipients:e,text:a}),E({recipients:e,text:a,sender:t})},selectConversationIndex:v,createConversation:function(e){u((function(t){return[].concat(Object(y.a)(t),[{recipients:e,messages:[]}])}))}};return r.a.createElement(M.Provider,{value:j},a)}function I(e){var t=e.darkMode,a=N(),n=a.conversations,c=a.selectConversationIndex;return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"flush"},n.map((function(e,a){return r.a.createElement(E.a.Item,{variant:"".concat(t?"danger":"primary"),key:a,action:!0,onClick:function(){return c(a)},active:e.selected},e.recipients.map((function(e){return e.name})).join(", "))}))))}function D(e){var t=e.darkMode,a=h().contacts;return r.a.createElement(E.a,{variant:"flush"},a.map((function(e){return r.a.createElement(E.a.Item,{key:e.id,variant:"".concat(t?"danger":"primary")},e.name)})))}function G(e){var t=e.closeModal,a=Object(n.useRef)(),c=Object(n.useRef)(),o=h().createContact;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Header,{closeButton:!0},"Create Contact"),r.a.createElement(b.a.Body,null,r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),o(a.current.value,c.current.value),t()}},r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Id"),r.a.createElement(u.a.Control,{type:"text",ref:a,required:!0})),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Name"),r.a.createElement(u.a.Control,{type:"text",ref:c,required:!0})),r.a.createElement(s.a,{type:"submit"},"Create"))))}function B(e){var t=e.closeModal,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],i=c[1],m=h().contacts,d=N().createConversation;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Header,{closeButton:!0},"Create Conversation"),r.a.createElement(b.a.Body,null,r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),d(o),t()}},m.map((function(e){return r.a.createElement(u.a.Group,{controlId:e.id,key:e.id},r.a.createElement(u.a.Check,{type:"checkbox",value:o.includes(e.id),label:e.name,onChange:function(){return t=e.id,void i((function(e){return e.includes(t)?e.filter((function(e){return t!==e})):[].concat(Object(y.a)(e),[t])}));var t}}))})),r.a.createElement(s.a,{type:"submit"},"Create"))))}function L(e){var t=e.id,a=e.darkMode,c=Object(n.useState)("conversations"),o=Object(l.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),f=d[0],E=d[1],g="conversations"===i;function y(){E(!1)}var k={background:"".concat(a?"#685D5D":"#DDDDD8"),width:"250px"},h={color:"".concat(a?"white":"black")};return r.a.createElement("div",{style:k,className:"d-flex flex-column"},r.a.createElement(v.a.Container,{activeKey:i,onSelect:u},r.a.createElement(p.a,{variant:"tabs",className:"justify-content-center"},r.a.createElement(p.a.Item,{style:{}},r.a.createElement(p.a.Link,{eventKey:"conversations"},"Conversations")),r.a.createElement(p.a.Item,null,r.a.createElement(p.a.Link,{eventKey:"contacts"},"Contacts"))),r.a.createElement(v.a.Content,{className:"border-right overflow-auto flex-grow-1"},r.a.createElement(v.a.Pane,{eventKey:"conversations"},r.a.createElement(I,{darkMode:a})),r.a.createElement(v.a.Pane,{eventKey:"contacts"},r.a.createElement(D,{darkMode:a}))),r.a.createElement("div",{className:"p-2 border-top border-right small",style:h},"Your Id: ",r.a.createElement("span",null,t)),r.a.createElement(s.a,{onClick:function(){return E(!0)},className:"rounded-0",variant:"".concat(a?"danger":"primary")},"New ",g?"Conversation":"Contact")),r.a.createElement(b.a,{show:f,onHide:y},g?r.a.createElement(B,{closeModal:y}):r.a.createElement(G,{closeModal:y})))}var z=a(113);a(50);function H(e){var t=e.darkMode,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],m=Object(n.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]),d=N(),f=d.sendMessage,v=d.selectedConversation;var p={color:"".concat(t?"white":"black"),background:"".concat(t?"grey":"white"),height:"75px",resize:"none"},b={background:"".concat(t?'url("https://wallpapercave.com/wp/wp8092590.jpg")':'url("https://64.media.tumblr.com/53a35e7ed66f3159e01f3663af30706b/tumblr_ouztgbH0CG1vj8v9mo1_400.png")')},E={color:"".concat(t?"white":"black"),background:"".concat(t?"grey":"white")},g={color:"".concat(t?"white":"black"),background:"".concat(t?"red":"#81BFE6")};return r.a.createElement("div",{className:"d-flex flex-column flex-grow-1",style:b},r.a.createElement("div",{className:"flex-grow-1 overflow-auto"},r.a.createElement("div",{className:"d-flex flex-column align-items-start justify-content-end px-3"},v.messages.map((function(e,t){var a=v.messages.length-1===t;return r.a.createElement("div",{ref:a?m:null,key:t,className:"my-1 d-flex flex-column ".concat(e.fromMe?"align-self-end align-items-end":"align-items-start")},r.a.createElement("div",{className:"rounded px-2 py-1 ",style:{color:"".concat(e.fromMe?g.color:E.color),background:"".concat(e.fromMe?g.background:E.background)}},e.text),r.a.createElement("div",{className:"small ".concat(e.fromMe?"text-right":""),style:{color:E.color}},e.fromMe?"You":e.senderName))})))),r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),f(v.recipients.map((function(e){return e.id})),o),i("")}},r.a.createElement(u.a.Group,{className:"m-2"},r.a.createElement(z.a,null,r.a.createElement(u.a.Control,{as:"textarea",required:!0,value:o,onChange:function(e){return i(e.target.value)},style:p}),r.a.createElement(z.a.Append,null,r.a.createElement(s.a,{type:"submit",variant:"".concat(t?"danger":"primary")},"Send"))))))}function _(e){var t=e.id,a=e.darkMode,n=N().selectedConversation,c={height:"93.5vh",background:"".concat(a?'url("https://wallpapercave.com/wp/wp8092590.jpg")':'url("https://64.media.tumblr.com/53a35e7ed66f3159e01f3663af30706b/tumblr_ouztgbH0CG1vj8v9mo1_400.png")')};return r.a.createElement("div",{className:"d-flex",style:c},r.a.createElement(L,{id:t,darkMode:a}),n&&r.a.createElement(H,{darkMode:a}))}var q=function(){var e=f("id"),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],m=i[1],v=r.a.createElement(w,{id:a},r.a.createElement(j,null,r.a.createElement(S,{id:a},r.a.createElement(_,{id:a,darkMode:s})))),p={color:"".concat(s?"white":""),background:"".concat(s?"#272222":""),fontSize:"1.5rem",padding:"4px 2px 0px 4px"};return r.a.createElement("div",null,r.a.createElement("nav",{className:"d-flex",style:p},r.a.createElement("ul",{style:{marginBottom:"0.5rem"}},r.a.createElement("li",{style:{listStyle:"none"}},"Talk-a-tive")),r.a.createElement(u.a,{style:{marginLeft:"1200px",marginTop:"5px",fontSize:"20px"}},r.a.createElement(u.a.Check,{type:"switch",id:"custom-switch",label:"DarkMode",onClick:function(){m(!s)}}))),a?v:r.a.createElement(d,{onIdSubmit:c,darkMode:s}))};a(107);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))},70:function(e,t,a){e.exports=a(108)}},[[70,1,2]]]);
//# sourceMappingURL=main.42fa6f4e.chunk.js.map